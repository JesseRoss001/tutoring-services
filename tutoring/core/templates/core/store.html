{% extends 'core/base.html' %}

{% block content %}
<div id="app">
  <!-- Django Loop -->
  <div>
    <h1>Django Rendered Products</h1>
    {% for product in products %}
      <div>
        <h3>{{ product.name }}</h3>
        <p>{{ product.description }}</p>
        <p>Price: £{{ product.price }}</p>
        <img src="{{ product.image.url }}" alt="{{ product.name }} Image">
      </div>
    {% endfor %}
  </div>

  <h1>Vue Rendered Products</h1>
  
  <!-- Vue with Django Context -->
  <div v-for="product in djangoProducts" :key="product.id">
    <h3>{{ product.name }}</h3>
    <p>{{ product.description }}</p>
    <p>Price: £{{ product.price }}</p>
    <img :src="'/media/' + product.image" alt="Vue Image">
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
  new Vue({
    el: '#app',
    data: {
      djangoProducts: []
    },
    methods: {
      fetchProducts() {
        axios.get('/api/products/')
          .then(response => {
            this.djangoProducts = response.data;
          })
          .catch(error => {
            console.error('Error fetching products:', error);
          });
      }
    },
    mounted() {
      this.fetchProducts();
    }
  });
</script>
{% endblock %}
